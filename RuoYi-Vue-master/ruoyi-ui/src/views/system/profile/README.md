# 业主认证审核功能完善说明

## 功能概述

本次完善了 `ruoyi-ui/src/views/system/profile/index.vue` 页面的业主认证审核功能，提供了更完整、更用户友好的审核流程。

## 主要改进

### 1. 后端接口完善
- **新增审核接口**: 在 `SysOwnerProfileController` 中添加了 `/system/owner/audit` 接口
- **Service层实现**: 在 `ISysOwnerProfileService` 和 `SysOwnerProfileServiceImpl` 中添加了 `auditOwnerProfile` 方法
- **权限控制**: 使用 `@PreAuthorize("@ss.hasPermi('system:owner:audit')")` 进行权限验证

### 2. 前端界面优化

#### 2.1 搜索功能增强
- 新增手机号码搜索条件
- 优化搜索表单布局
- 默认查询待审核状态的记录

#### 2.2 表格功能完善
- 添加多选功能，支持批量操作
- 新增手机号码列显示
- 添加申请时间和审核时间列
- 优化列宽和显示效果
- 只有待审核状态的记录才能被选中

#### 2.3 批量审核功能
- 新增批量通过和批量驳回按钮
- 实现批量审核对话框
- 支持批量审核备注填写
- 提供审核状态提示

### 3. 审核对话框优化

#### 3.1 信息展示优化
- 使用卡片布局分组显示信息
- **申请人信息卡片**: 显示基本身份信息
- **身份证件卡片**: 展示身份证正反面图片
- **审核信息卡片**: 审核状态和备注

#### 3.2 用户体验提升
- 审核状态选择带有颜色标识（通过-绿色，驳回-红色）
- 驳回时自动清空备注，通过时可选择性填写
- 添加提交按钮加载状态
- 优化表单验证规则

### 4. 查看功能
- 新增查看详情对话框
- 支持查看已审核记录的所有信息
- 显示审核历史记录

### 5. 样式优化
- 添加自定义CSS样式
- 优化卡片和按钮样式
- 改进图片预览效果
- 统一界面风格

## 技术实现

### 前端技术栈
- Vue 2.x + Element UI
- 响应式布局设计
- 表单验证和数据处理
- 异步请求处理

### 后端技术栈
- Spring Boot 2.5.15
- Spring Security 权限控制
- MyBatis 数据访问
- 事务管理

## 权限配置

需要在系统菜单中配置以下权限：
- `system:owner:list` - 查看业主信息列表
- `system:owner:audit` - 审核业主认证
- `system:owner:query` - 查看业主详情

## 使用说明

### 1. 单个审核
1. 在列表中找到待审核记录
2. 点击"审核"按钮
3. 在弹出的对话框中查看申请人信息
4. 选择审核状态（通过/驳回）
5. 填写审核备注（驳回时必填）
6. 点击"确定"提交审核

### 2. 批量审核
1. 勾选多个待审核记录
2. 点击"批量通过"或"批量驳回"按钮
3. 在弹出的对话框中确认审核状态
4. 填写审核备注
5. 点击"确定"执行批量审核

### 3. 查看详情
1. 点击任意记录的"查看"按钮
2. 在弹出的对话框中查看完整信息
3. 包括申请人信息、身份证件和审核历史

## 数据流程

1. **申请提交**: 业主在小程序端提交认证申请
2. **待审核**: 系统管理员在管理端查看待审核列表
3. **审核处理**: 管理员进行单个或批量审核
4. **状态更新**: 审核结果更新到数据库
5. **结果通知**: 业主可通过小程序查看审核结果

## 注意事项

1. 只有待审核状态（authStatus='1'）的记录才能被审核
2. 驳回时必须填写审核备注
3. 批量审核时所有选中的记录将应用相同的审核状态和备注
4. 审核操作会记录操作日志
5. 图片预览支持点击放大查看

## 扩展建议

1. 可考虑添加审核流程配置
2. 支持多级审核机制
3. 添加审核时效统计
4. 集成消息通知功能
5. 支持审核模板和常用备注